<!doctype html>
<html>

<head>
	<title>Pi Temperature Grapher</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="js/jquery.timepicker.min.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
	<script src="js/jquery.timepicker.min.js"></script>
	<script src="js/temperature-utils.js"></script>
	<style>
		canvas {
			-moz-user-select: none;
			-webkit-user-select: none;
			-ms-user-select: none;
		}
	</style>
</head>

<body>
    <h2>Choose time period</h2>

    <form>
       Start: <input type="text" id="start_day" value=""> <input type="text" id="start_hour" value=""> 
       End: <input type="text" id="end_day" value=""> <input type="text" id="end_hour" value=""> 
       <input type="button" id="update" value="Graph"/>
   </form>

	<div style="width:1000px">
		<h2 id="graph_label"></h2>
		<canvas id="graph" class="chart"></canvas>
	</div>

	<br>
	<br>
	<script>
        $( function() {
            $( "#start_day" ).datepicker( { dateFormat:"yy/mm/dd"});
            $( "#start_hour" ).timepicker( { timeFormat: "H:i"});
            $( "#end_day" ).datepicker( { dateFormat:"yy/mm/dd"});
            $( "#end_hour" ).timepicker( { timeFormat: "H:i"});
        } );


        $( "#update").on( "click" , function () {
            var dataset;
            dataset = query_dataset($("#start_day").val(),
                                    $("#start_hour").val(),
                                    $("#end_day").val(),
                                    $("#end_hour").val()); 
            // Stub
            dataset = [{'t2': 21625, 'ts': 1527794875, 't1': 24000}, {'t2': 21250, 'ts': 1527794936, 't1': 24000}, {'t2': 20937, 'ts': 1527794996, 't1': 23937}, {'t2': 20750, 'ts': 1527795056, 't1': 23875}, {'t2': 20562, 'ts': 1527795116, 't1': 23812}];
            draw_graph($("#graph"), dataset);
        });
	</script>
</body>
</html>
